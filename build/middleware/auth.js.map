{"version":3,"sources":["../../src/middleware/auth.js"],"names":["auth","req","res","next","token","header","replace","data","jwt","verify","process","env","JWT_KEY","database","User","findOne","where","id","user","status","send","error"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAECC,YAAAA,KAFD,GAESH,GAAG,CAACI,MAAJ,CAAW,eAAX,EAA4BC,OAA5B,CAAoC,SAApC,EAA+C,EAA/C,CAFT,EAGL;;AACMC,YAAAA,IAJD,GAIQC,yBAAIC,MAAJ,CAAWL,KAAX,EAAkBM,OAAO,CAACC,GAAR,CAAYC,OAA9B,CAJR;AAAA;AAAA,mBAKcC,mBAASC,IAAT,CAAcC,OAAd,CAAsB;AAAEC,cAAAA,KAAK,EAAE;AAAEC,gBAAAA,EAAE,EAAEV,IAAI,CAACU;AAAX;AAAT,aAAtB,CALd;;AAAA;AAKCC,YAAAA,IALD;AAMLjB,YAAAA,GAAG,CAACiB,IAAJ,GAAWA,IAAX;AACAjB,YAAAA,GAAG,CAACG,KAAJ,GAAYA,KAAZ;AACAD,YAAAA,IAAI;AARC;AAAA;;AAAA;AAAA;AAAA;AAULD,YAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,cAAAA,KAAK,EAAE;AAAT,aAArB;;AAVK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAJrB,IAAI;AAAA;AAAA;AAAA,GAAV;;eAaeA,I","sourcesContent":["import jwt from 'jsonwebtoken'\nimport database from '../models'\n\nconst auth = async (req, res, next) => {\n    try {\n        const token = req.header('Authorization').replace('Bearer ', '')\n        // eslint-disable-next-line no-undef\n        const data = jwt.verify(token, process.env.JWT_KEY)\n        const user = await database.User.findOne({ where: { id: data.id } })\n        req.user = user\n        req.token = token\n        next()\n    } catch (error) {\n        res.status(401).send({ error: 'Not authorized to access this resource' })\n    }\n}\nexport default auth\n"],"file":"auth.js"}